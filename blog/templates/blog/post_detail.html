{% extends 'blog/base.html' %}
{% block content %}
	{% if post.published_date %}
		<p>published: {{ post.published_date }}</p>
	{% else %}
		<a href="{% url 'post_publish' pk=post.pk %}">Publish</a>
	{% endif %}
	<h1>{{ post.title }}</h1>
	<p>{{ post.text|linebreaksbr }}</p>
	{% if user.is_authenticated %}
		<a href="{% url 'post_edit' pk=post.pk %}">Edit</a>
		<a href="{% url 'post_delete' pk=post.pk %}">Delete</a>
	{% endif %}
	<a href="{% url 'add_comment' pk=post.pk%}">Add Comment</a>
	{% for comment in post.comments.all %}
		{% if user.is_authenticated or comment.approved_comment %}
			<p>{{ comment.created_date }}</p>
			{% if not comment.approved_comment %}
				<a href="{% url 'approve_comment' pk=comment.pk %}">Approve</a>
				<a href="{% url 'remove_comment' pk=comment.pk %}">Remove</a>
			{% endif %}
			<p>{{ comment.author }}</p>
			<p>{{ comment.text|linebreaks }}</p>
		{% endif %}
	{% empty %}
		<p>No comments here yet:(</p>
	{% endfor %}
{% endblock %}