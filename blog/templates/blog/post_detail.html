{% extends 'blog/base.html' %}
{% block content %}
	<div class="container">
		<div class="blog">
			{% if post.published_date %}
				<p>published: {{ post.published_date }}</p>
			{% else %}
				<a href="{% url 'post_publish' pk=post.pk %}">Publish</a>
			{% endif %}
			<h1>{{ post.title }}</h1>
			<p>{{ post.text|linebreaksbr }}</p>
			{% if user.is_authenticated %}
				<a href="{% url 'post_edit' pk=post.pk %}">
					<input class="btn btn-primary" type="button" value="Edit"/>
				</a>
				<a href="{% url 'post_delete' pk=post.pk %}">
					<input class="btn btn-primary" type="button" value="Delete"/>
				</a>
			{% endif %}
				<a href="{% url 'add_comment' pk=post.pk %}">
					<input class="btn btn-primary" type="button" value="Comment"/>
				</a>
		</div>
		<div class="comment-list">
			{% for comment in post.comments.all %}
				<div class="comment">
					{% if user.is_authenticated or comment.approved_comment %}
						<p>{{ comment.created_date }}</p>
						{% if not comment.approved_comment %}
							<a href="{% url 'approve_comment' pk=comment.pk %}">
								<input class="btn btn-outline-primary" type="button" value="Approve"/>
							</a>
							<a href="{% url 'remove_comment' pk=comment.pk %}">
								<input class="btn btn-outline-primary" type="button" value="Remove"/>
							</a>
						{% endif %}
						<p>{{ comment.author }}</p>
						<p>{{ comment.text|linebreaks }}</p>
					{% endif %}
				</div>
			{% empty %}
				<p>No comments here yet:(</p>
			{% endfor %}
		</div>
	</div>
{% endblock %}